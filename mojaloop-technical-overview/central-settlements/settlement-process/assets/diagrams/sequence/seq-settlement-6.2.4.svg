<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1875px" preserveAspectRatio="none" style="width:1131px;height:1875px;" version="1.1" viewBox="0 0 1131 1875" width="1131px" zoomAndPan="magnify"><defs><filter height="300%" id="ft7j1drvgtizf" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="336" x="398.5" y="23.5352">6.2.4. Get Settlement By Id (getSettlementById)</text><rect fill="#FFB6C1" height="1830.1992" style="stroke: #A80036; stroke-width: 1.0;" width="112" x="109" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="81" x="124.5" y="47.0566">Central HUB</text><rect fill="#90EE90" height="1830.1992" style="stroke: #A80036; stroke-width: 1.0;" width="367.5" x="352.5" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="124" x="474.25" y="47.0566">Settlement Service</text><rect fill="#FFFFE0" height="1830.1992" style="stroke: #A80036; stroke-width: 1.0;" width="114" x="770" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="773" y="47.0566">Central Services</text><rect fill="#FFFFFF" filter="url(#ft7j1drvgtizf)" height="1598.9121" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="160" y="147.2871"/><rect fill="#FFFFFF" filter="url(#ft7j1drvgtizf)" height="1553.291" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="430" y="192.9082"/><rect fill="#FFFFFF" filter="url(#ft7j1drvgtizf)" height="183.1738" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="654" y="237.5293"/><rect fill="#FFFFFF" filter="url(#ft7j1drvgtizf)" height="229.1055" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="654" y="489.6348"/><rect fill="#FFFFFF" filter="url(#ft7j1drvgtizf)" height="229.1055" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="654" y="763.3613"/><rect fill="#FFFFFF" filter="url(#ft7j1drvgtizf)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="822" y="266.8398"/><rect fill="#FFFFFF" filter="url(#ft7j1drvgtizf)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="822" y="518.9453"/><rect fill="#FFFFFF" filter="url(#ft7j1drvgtizf)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="822" y="792.6719"/><rect fill="#FFFFFF" filter="url(#ft7j1drvgtizf)" height="1606.9121" style="stroke: #000000; stroke-width: 2.0;" width="1107" x="13" y="154.2871"/><rect fill="#FFFFFF" filter="url(#ft7j1drvgtizf)" height="1318.4961" style="stroke: #000000; stroke-width: 2.0;" width="1087" x="23" y="435.7031"/><rect fill="#FFFFFF" height="186.4844" style="stroke: none; stroke-width: 1.0;" width="1087" x="23" y="1567.7148"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="165" x2="165" y1="137.2871" y2="1778.1992"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="434.5" x2="434.5" y1="137.2871" y2="1778.1992"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="659" x2="659" y1="137.2871" y2="1778.1992"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="827" x2="827" y1="137.2871" y2="1778.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="113" y="134.334">Hub Employee</text><ellipse cx="165" cy="63.7988" fill="#FEFECE" filter="url(#ft7j1drvgtizf)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M165,71.7988 L165,98.7988 M152,79.7988 L178,79.7988 M165,98.7988 L152,113.7988 M165,98.7988 L178,113.7988 " fill="none" filter="url(#ft7j1drvgtizf)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="113" y="1790.7344">Hub Employee</text><ellipse cx="165" cy="1803.6875" fill="#FEFECE" filter="url(#ft7j1drvgtizf)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M165,1811.6875 L165,1838.6875 M152,1819.6875 L178,1819.6875 M165,1838.6875 L152,1853.6875 M165,1838.6875 L178,1853.6875 " fill="none" filter="url(#ft7j1drvgtizf)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="151" x="356.5" y="134.334">Settlement Service API</text><path d="M414.5,92.7988 L414.5,116.7988 M414.5,104.7988 L431.5,104.7988 " fill="none" filter="url(#ft7j1drvgtizf)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="443.5" cy="104.7988" fill="#FEFECE" filter="url(#ft7j1drvgtizf)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="151" x="356.5" y="1790.7344">Settlement Service API</text><path d="M414.5,1797.6875 L414.5,1821.6875 M414.5,1809.6875 L431.5,1809.6875 " fill="none" filter="url(#ft7j1drvgtizf)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="443.5" cy="1809.6875" fill="#FEFECE" filter="url(#ft7j1drvgtizf)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="602" y="134.334">Settlement DAO</text><ellipse cx="659" cy="104.7988" fill="#FEFECE" filter="url(#ft7j1drvgtizf)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="647" x2="671" y1="118.7988" y2="118.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="602" y="1790.7344">Settlement DAO</text><ellipse cx="659" cy="1809.6875" fill="#FEFECE" filter="url(#ft7j1drvgtizf)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="647" x2="671" y1="1823.6875" y2="1823.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="779" y="134.334">Central Store</text><path d="M809,84.7988 C809,74.7988 827,74.7988 827,74.7988 C827,74.7988 845,74.7988 845,84.7988 L845,110.7988 C845,120.7988 827,120.7988 827,120.7988 C827,120.7988 809,120.7988 809,110.7988 L809,84.7988 " fill="#FEFECE" filter="url(#ft7j1drvgtizf)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M809,84.7988 C809,94.7988 827,94.7988 827,94.7988 C827,94.7988 845,94.7988 845,84.7988 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="779" y="1790.7344">Central Store</text><path d="M809,1803.6875 C809,1793.6875 827,1793.6875 827,1793.6875 C827,1793.6875 845,1793.6875 845,1803.6875 L845,1829.6875 C845,1839.6875 827,1839.6875 827,1839.6875 C827,1839.6875 809,1839.6875 809,1829.6875 L809,1803.6875 " fill="#FEFECE" filter="url(#ft7j1drvgtizf)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M809,1803.6875 C809,1813.6875 827,1813.6875 827,1813.6875 C827,1813.6875 845,1813.6875 845,1803.6875 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#ft7j1drvgtizf)" height="1598.9121" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="160" y="147.2871"/><rect fill="#FFFFFF" filter="url(#ft7j1drvgtizf)" height="1553.291" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="430" y="192.9082"/><rect fill="#FFFFFF" filter="url(#ft7j1drvgtizf)" height="183.1738" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="654" y="237.5293"/><rect fill="#FFFFFF" filter="url(#ft7j1drvgtizf)" height="229.1055" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="654" y="489.6348"/><rect fill="#FFFFFF" filter="url(#ft7j1drvgtizf)" height="229.1055" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="654" y="763.3613"/><rect fill="#FFFFFF" filter="url(#ft7j1drvgtizf)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="822" y="266.8398"/><rect fill="#FFFFFF" filter="url(#ft7j1drvgtizf)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="822" y="518.9453"/><rect fill="#FFFFFF" filter="url(#ft7j1drvgtizf)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="822" y="792.6719"/><path d="M13,154.2871 L194,154.2871 L194,161.2871 L184,171.2871 L13,171.2871 L13,154.2871 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1606.9121" style="stroke: #000000; stroke-width: 2.0;" width="1107" x="13" y="154.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="136" x="28" y="167.8555">Get Settlement By Id</text><polygon fill="#A80036" points="418,188.9082,428,192.9082,418,196.9082,422,192.9082" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="170" x2="424" y1="192.9082" y2="192.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="177" y="188.166">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="190" y="188.166">GET - /settlements/{id}</text><polygon fill="#A80036" points="642,233.5293,652,237.5293,642,241.5293,646,237.5293" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="440" x2="648" y1="237.5293" y2="237.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="447" y="225.1318">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="460" y="217.4766">Request settlement state</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="460" y="232.7871">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="537" y="232.7871">2001</text><polygon fill="#A80036" points="810,262.8398,820,266.8398,810,270.8398,814,266.8398" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="664" x2="816" y1="266.8398" y2="266.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="671" y="262.0977">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="684" y="262.0977">Retrieve settlement</text><polygon fill="#FFFFE0" filter="url(#ft7j1drvgtizf)" points="606,309.8398,1047,309.8398,1057,351.8398,1047,393.8398,606,393.8398,596,351.8398,606,309.8398" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="437" x="608" y="326.4082">SELECT s.settlementId, ssc.settlementStateId, s.reason, s.createdDate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="608" y="341.7188">FROM</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72" x="648" y="341.7188">settlement</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="724" y="341.7188">s</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="608" y="357.0293">JOIN</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="157" x="640" y="357.0293">settlementStateChange</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="801" y="357.0293">ssc</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="370" x="608" y="372.3398">ON ssc.settlementStateChangeId = s.currentStateChangeId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="608" y="387.6504">WHERE s.settlementId = {id}</text><polygon fill="#A80036" points="451,416.7031,441,420.7031,451,424.7031,447,420.7031" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="445" x2="658" y1="420.7031" y2="420.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="457" y="415.9609">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="470" y="415.9609">Return</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72" x="515" y="415.9609">settlement</text><path d="M23,435.7031 L85,435.7031 L85,442.7031 L75,452.7031 L23,452.7031 L23,435.7031 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1318.4961" style="stroke: #000000; stroke-width: 2.0;" width="1087" x="23" y="435.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="38" y="449.2715">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="103" x="100" y="448.3379">[settlement found]</text><polygon fill="#A80036" points="642,485.6348,652,489.6348,642,493.6348,646,489.6348" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="440" x2="648" y1="489.6348" y2="489.6348"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="447" y="477.2373">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="460" y="469.582">Request settlement windows</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="460" y="484.8926">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="537" y="484.8926">2001</text><polygon fill="#A80036" points="810,514.9453,820,518.9453,810,522.9453,814,518.9453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="664" x2="816" y1="518.9453" y2="518.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="671" y="514.2031">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="684" y="514.2031">Retrieve windows</text><polygon fill="#FFFFE0" filter="url(#ft7j1drvgtizf)" points="605,561.9453,1048,561.9453,1058,626.9453,1048,691.9453,605,691.9453,595,626.9453,605,561.9453" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="404" x="607" y="578.5137">SELECT sw.settlementWindowId, swsc.settlementWindowStateId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="385" x="635" y="593.8242">swsc.reason, sw.createdDate, swsc.createdDate changedDate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="607" y="609.1348">FROM</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="197" x="647" y="609.1348">settlementSettlementWindow</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="848" y="609.1348">ssw</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="607" y="624.4453">JOIN</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="125" x="639" y="624.4453">settlementWindow</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="768" y="624.4453">sw</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="347" x="607" y="639.7559">ON sw.settlementWindowId = ssw.settlementWindowId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="607" y="655.0664">JOIN</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="210" x="639" y="655.0664">settlementWindowStateChange</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="853" y="655.0664">swsc</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="439" x="607" y="670.377">ON swsc.settlementWindowStateChangeId = sw.currentStateChangeId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="607" y="685.6875">WHERE ssw.settlementId = {id}</text><polygon fill="#A80036" points="451,714.7402,441,718.7402,451,722.7402,447,718.7402" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="445" x2="658" y1="718.7402" y2="718.7402"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="457" y="713.998">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="470" y="713.998">Return</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="59" x="515" y="713.998">windows</text><polygon fill="#A80036" points="642,759.3613,652,763.3613,642,767.3613,646,763.3613" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="440" x2="648" y1="763.3613" y2="763.3613"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="447" y="750.9639">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="460" y="743.3086">Request settlement accounts</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="460" y="758.6191">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="537" y="758.6191">2001</text><polygon fill="#A80036" points="810,788.6719,820,792.6719,810,796.6719,814,792.6719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="664" x2="816" y1="792.6719" y2="792.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="671" y="787.9297">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="684" y="787.9297">Retrieve accounts</text><polygon fill="#FFFFE0" filter="url(#ft7j1drvgtizf)" points="563,835.6719,1090,835.6719,1100,900.6719,1090,965.6719,563,965.6719,553,900.6719,563,835.6719" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="480" x="565" y="852.2402">SELECT pc.participantId, spc.participantCurrencyId, spcsc.settlementStateId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="279" x="593" y="867.5508">spcsc.reason, spc.netAmount, pc.currencyId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="565" y="882.8613">FROM</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="207" x="605" y="882.8613">settlementParticipantCurrency</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="22" x="816" y="882.8613">spc</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="565" y="898.1719">JOIN</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="292" x="597" y="898.1719">settlementParticipantCurrencyStateChange</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="893" y="898.1719">spcsc</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="523" x="565" y="913.4824">ON spcsc.settlementParticipantCurrencyStateChangeId = spc.currentStateChangeId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="565" y="928.793">JOIN</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="136" x="597" y="928.793">participantCurrency</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="15" x="737" y="928.793">pc</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="359" x="565" y="944.1035">ON pc.participantCurrencyId = spc.participantCurrencyId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="565" y="959.4141">WHERE spc.settlementId = {id}</text><polygon fill="#A80036" points="451,988.4668,441,992.4668,451,996.4668,447,992.4668" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="445" x2="658" y1="992.4668" y2="992.4668"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="457" y="987.7246">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="479" y="987.7246">Return</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="60" x="524" y="987.7246">accounts</text><path d="M33,1005.4668 L33,1030.4668 L421,1030.4668 L421,1015.4668 L411,1005.4668 L33,1005.4668 " fill="#D3D3D3" filter="url(#ft7j1drvgtizf)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M411,1005.4668 L411,1015.4668 L421,1015.4668 L411,1005.4668 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="367" x="39" y="1023.0352">Are we going to report window content related info below?</text><path d="M72,1044.7773 L72,1528.7773 L421,1528.7773 L421,1054.7773 L411,1044.7773 L72,1044.7773 " fill="#FFFF00" filter="url(#ft7j1drvgtizf)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M411,1044.7773 L411,1054.7773 L421,1054.7773 L411,1044.7773 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="78" y="1062.3457">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="94" y="1077.6563">"id": settlement.settlementId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="94" y="1092.9668">"state": settlement.settlementStateId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="94" y="1108.2773">"settlementWindows": [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="110" y="1123.5879">[</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="126" y="1138.8984">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="142" y="1154.209">"id": window.settlementWindowId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="142" y="1169.5195">"reason": window.reason,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="264" x="142" y="1184.8301">"state": window.settlementWindowStateId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="142" y="1200.1406">"createdDate": window.createdDate,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="142" y="1215.4512">"changedDate": window.changedDate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="126" y="1230.7617">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="110" y="1246.0723">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="94" y="1261.3828">],</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="94" y="1276.6934">"participants": [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="110" y="1292.0039">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="126" y="1307.3145">"id": account.participantId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="126" y="1322.625">"accounts": [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="142" y="1337.9355">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="158" y="1353.2461">"id": account.participantCurrencyId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="158" y="1368.5566">"reason": account.reason,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="217" x="158" y="1383.8672">"state": account.settlementStateId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="158" y="1399.1777">"netSettlementAmount": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="174" y="1414.4883">"amount": account.netAmount,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="174" y="1429.7988">"currency": account.currencyId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="158" y="1445.1094">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="142" y="1460.4199">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="126" y="1475.7305">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="110" y="1491.041">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="94" y="1506.3516">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="78" y="1521.6621">}</text><polygon fill="#A80036" points="181,1555.7148,171,1559.7148,181,1563.7148,177,1559.7148" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="175" x2="429" y1="1559.7148" y2="1559.7148"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="187" y="1554.9727">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="209" y="1554.9727">Respond HTTP - 200 (OK)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="23" x2="1110" y1="1568.7148" y2="1568.7148"/><path d="M445,1574.7148 L445,1599.7148 L572,1599.7148 L572,1584.7148 L562,1574.7148 L445,1574.7148 " fill="#D3D3D3" filter="url(#ft7j1drvgtizf)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M562,1574.7148 L562,1584.7148 L572,1584.7148 L562,1574.7148 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="451" y="1592.2832">Log ERROR event</text><path d="M91,1614.0254 L91,1715.0254 L421,1715.0254 L421,1624.0254 L411,1614.0254 L91,1614.0254 " fill="#FFFF00" filter="url(#ft7j1drvgtizf)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M411,1614.0254 L411,1624.0254 L421,1624.0254 L411,1614.0254 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="97" y="1631.5938">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="113" y="1646.9043">errorInformation: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="129" y="1662.2148">"errorCode": &lt;integer&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="277" x="129" y="1677.5254">"errorDescription": "Client error description"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="113" y="1692.8359">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="97" y="1708.1465">}</text><polygon fill="#A80036" points="176,1742.1992,166,1746.1992,176,1750.1992,172,1746.1992" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="170" x2="434" y1="1746.1992" y2="1746.1992"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="182" y="1741.457">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="204" y="1741.457">Respond HTTP - 4xx (Client error)</text><!--
@startuml
title 6.2.4. Get Settlement By Id (getSettlementById)
autonumber

actor "Hub Employee" as OPERATOR
boundary "Settlement Service API" as SSAPI
entity "Settlement DAO" as SETTLE_DAO
database "Central Store" as DB

box "Central HUB" #lightpink
    participant OPERATOR
end box

box "Settlement Service" #lightgreen
    participant SSAPI
    participant SETTLE_DAO
end box

box "Central Services" #lightyellow
    participant DB
end box

group Get Settlement By Id
activate OPERATOR
    OPERATOR -> SSAPI: GET - /settlements/{id}
    activate SSAPI

    SSAPI-> SETTLE_DAO: Request settlement state\n<color #FF0000><b>Error code:</b> 2001</color>
    activate SETTLE_DAO
    SETTLE_DAO -> DB: Retrieve settlement
    activate DB
    hnote over DB #lightyellow
        SELECT s.settlementId, ssc.settlementStateId, s.reason, s.createdDate
        FROM **settlement** s
        JOIN **settlementStateChange** ssc
        ON ssc.settlementStateChangeId = s.currentStateChangeId
        WHERE s.settlementId = {id}
    end hnote
    deactivate DB
    SSAPI <- - SETTLE_DAO: Return **settlement**
    deactivate SETTLE_DAO

    alt settlement found
        SSAPI-> SETTLE_DAO: Request settlement windows\n<color #FF0000><b>Error code:</b> 2001</color>
        activate SETTLE_DAO
        SETTLE_DAO -> DB: Retrieve windows
        activate DB
        hnote over DB #lightyellow
            SELECT sw.settlementWindowId, swsc.settlementWindowStateId,
                   swsc.reason, sw.createdDate, swsc.createdDate changedDate
            FROM **settlementSettlementWindow** ssw
            JOIN **settlementWindow** sw
            ON sw.settlementWindowId = ssw.settlementWindowId
            JOIN **settlementWindowStateChange** swsc
            ON swsc.settlementWindowStateChangeId = sw.currentStateChangeId
            WHERE ssw.settlementId = {id}
        end hnote
        deactivate DB
        SSAPI <- - SETTLE_DAO: Return **windows**
        deactivate SETTLE_DAO

        SSAPI-> SETTLE_DAO: Request settlement accounts\n<color #FF0000><b>Error code:</b> 2001</color>
        activate SETTLE_DAO
        SETTLE_DAO -> DB: Retrieve accounts
        activate DB
        hnote over DB #lightyellow
            SELECT pc.participantId, spc.participantCurrencyId, spcsc.settlementStateId, 
                   spcsc.reason, spc.netAmount, pc.currencyId
            FROM **settlementParticipantCurrency** spc
            JOIN **settlementParticipantCurrencyStateChange** spcsc
            ON spcsc.settlementParticipantCurrencyStateChangeId = spc.currentStateChangeId
            JOIN **participantCurrency** pc
            ON pc.participantCurrencyId = spc.participantCurrencyId
            WHERE spc.settlementId = {id}
        end hnote
        deactivate DB
        SSAPI <- - SETTLE_DAO: Return **accounts**
        deactivate SETTLE_DAO

        note left of SSAPI #lightgray
            <color #red>Are we going to report window content related info below?</color>
        end note
        note left of SSAPI #yellow
            {
                "id": settlement.settlementId,
                "state": settlement.settlementStateId,
                "settlementWindows": [
                    [
                        {
                            "id": window.settlementWindowId,
                            "reason": window.reason,
                            "state": window.settlementWindowStateId,
                            "createdDate": window.createdDate,
                            "changedDate": window.changedDate
                        }
                    ]
                ],
                "participants": [
                    {
                        "id": account.participantId,
                        "accounts": [
                            {
                                "id": account.participantCurrencyId,
                                "reason": account.reason,
                                "state": account.settlementStateId,
                                "netSettlementAmount": {
                                    "amount": account.netAmount,
                                    "currency": account.currencyId
                                }
                            }
                        ]
                    }
                ]
            }
        end note
        OPERATOR <- - SSAPI: Respond HTTP - 200 (OK)
    else
        note right of SSAPI #lightgray
            Log ERROR event
        end note
        note left of SSAPI #yellow
            {
                errorInformation: {
                    "errorCode": <integer>,
                    "errorDescription": "Client error description"
                }
            }
        end note
        OPERATOR <- - SSAPI: Respond HTTP - 4xx (Client error)
        deactivate SSAPI
        deactivate OPERATOR
    end
end
@enduml

PlantUML version 1.2018.05(Sat May 05 23:00:17 EEST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_131-b11
Operating System: Mac OS X
OS Version: 10.15.1
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>