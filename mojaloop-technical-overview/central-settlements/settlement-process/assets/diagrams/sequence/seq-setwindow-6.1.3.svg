<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1259px" preserveAspectRatio="none" style="width:1136px;height:1259px;" version="1.1" viewBox="0 0 1136 1259" width="1136px" zoomAndPan="magnify"><defs><filter height="300%" id="f1trggogjgpknh" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="577" x="280" y="23.5352">6.1.3. Get Settlement Windows By Parameters (getSettlementWindowsByParams)</text><rect fill="#FFB6C1" height="1214.1934" style="stroke: #A80036; stroke-width: 1.0;" width="112" x="106" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="81" x="121.5" y="47.0566">Central HUB</text><rect fill="#90EE90" height="1214.1934" style="stroke: #A80036; stroke-width: 1.0;" width="367.5" x="352.5" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="124" x="474.25" y="47.0566">Settlement Service</text><rect fill="#FFFFE0" height="1214.1934" style="stroke: #A80036; stroke-width: 1.0;" width="114" x="826" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="829" y="47.0566">Central Services</text><rect fill="#FFFFFF" filter="url(#f1trggogjgpknh)" height="982.9063" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="157" y="147.2871"/><rect fill="#FFFFFF" filter="url(#f1trggogjgpknh)" height="836.7324" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="430" y="293.4609"/><rect fill="#FFFFFF" filter="url(#f1trggogjgpknh)" height="350.9004" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="654" y="338.082"/><rect fill="#FFFFFF" filter="url(#f1trggogjgpknh)" height="292.2793" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="878" y="367.3926"/><rect fill="#FFFFFF" filter="url(#f1trggogjgpknh)" height="990.9063" style="stroke: #000000; stroke-width: 2.0;" width="1111" x="13" y="154.2871"/><rect fill="#FFFFFF" filter="url(#f1trggogjgpknh)" height="434.2109" style="stroke: #000000; stroke-width: 2.0;" width="563" x="23" y="703.9824"/><rect fill="#FFFFFF" height="186.4844" style="stroke: none; stroke-width: 1.0;" width="563" x="23" y="951.709"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="162" x2="162" y1="137.2871" y2="1162.1934"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="434.5" x2="434.5" y1="137.2871" y2="1162.1934"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="659" x2="659" y1="137.2871" y2="1162.1934"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="883" x2="883" y1="137.2871" y2="1162.1934"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="110" y="134.334">Hub Employee</text><ellipse cx="162" cy="63.7988" fill="#FEFECE" filter="url(#f1trggogjgpknh)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M162,71.7988 L162,98.7988 M149,79.7988 L175,79.7988 M162,98.7988 L149,113.7988 M162,98.7988 L175,113.7988 " fill="none" filter="url(#f1trggogjgpknh)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="110" y="1174.7285">Hub Employee</text><ellipse cx="162" cy="1187.6816" fill="#FEFECE" filter="url(#f1trggogjgpknh)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M162,1195.6816 L162,1222.6816 M149,1203.6816 L175,1203.6816 M162,1222.6816 L149,1237.6816 M162,1222.6816 L175,1237.6816 " fill="none" filter="url(#f1trggogjgpknh)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="151" x="356.5" y="134.334">Settlement Service API</text><path d="M414.5,92.7988 L414.5,116.7988 M414.5,104.7988 L431.5,104.7988 " fill="none" filter="url(#f1trggogjgpknh)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="443.5" cy="104.7988" fill="#FEFECE" filter="url(#f1trggogjgpknh)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="151" x="356.5" y="1174.7285">Settlement Service API</text><path d="M414.5,1181.6816 L414.5,1205.6816 M414.5,1193.6816 L431.5,1193.6816 " fill="none" filter="url(#f1trggogjgpknh)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="443.5" cy="1193.6816" fill="#FEFECE" filter="url(#f1trggogjgpknh)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="602" y="134.334">Settlement DAO</text><ellipse cx="659" cy="104.7988" fill="#FEFECE" filter="url(#f1trggogjgpknh)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="647" x2="671" y1="118.7988" y2="118.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="602" y="1174.7285">Settlement DAO</text><ellipse cx="659" cy="1193.6816" fill="#FEFECE" filter="url(#f1trggogjgpknh)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="647" x2="671" y1="1207.6816" y2="1207.6816"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="835" y="134.334">Central Store</text><path d="M865,84.7988 C865,74.7988 883,74.7988 883,74.7988 C883,74.7988 901,74.7988 901,84.7988 L901,110.7988 C901,120.7988 883,120.7988 883,120.7988 C883,120.7988 865,120.7988 865,110.7988 L865,84.7988 " fill="#FEFECE" filter="url(#f1trggogjgpknh)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M865,84.7988 C865,94.7988 883,94.7988 883,94.7988 C883,94.7988 901,94.7988 901,84.7988 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="835" y="1174.7285">Central Store</text><path d="M865,1187.6816 C865,1177.6816 883,1177.6816 883,1177.6816 C883,1177.6816 901,1177.6816 901,1187.6816 L901,1213.6816 C901,1223.6816 883,1223.6816 883,1223.6816 C883,1223.6816 865,1223.6816 865,1213.6816 L865,1187.6816 " fill="#FEFECE" filter="url(#f1trggogjgpknh)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M865,1187.6816 C865,1197.6816 883,1197.6816 883,1197.6816 C883,1197.6816 901,1197.6816 901,1187.6816 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#f1trggogjgpknh)" height="982.9063" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="157" y="147.2871"/><rect fill="#FFFFFF" filter="url(#f1trggogjgpknh)" height="836.7324" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="430" y="293.4609"/><rect fill="#FFFFFF" filter="url(#f1trggogjgpknh)" height="350.9004" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="654" y="338.082"/><rect fill="#FFFFFF" filter="url(#f1trggogjgpknh)" height="292.2793" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="878" y="367.3926"/><path d="M13,154.2871 L322,154.2871 L322,161.2871 L312,171.2871 L13,171.2871 L13,154.2871 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="990.9063" style="stroke: #000000; stroke-width: 2.0;" width="1111" x="13" y="154.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="264" x="28" y="167.8555">Get Settlement Windows By Parameters</text><path d="M172,176.5977 L172,262.5977 L400,262.5977 L400,186.5977 L390,176.5977 L172,176.5977 " fill="#FFFF00" filter="url(#f1trggogjgpknh)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M390,176.5977 L390,186.5977 L400,186.5977 L390,176.5977 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="178" y="194.166">Params:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="183" x="178" y="209.4766">?participantId={participantId}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="178" y="224.7871">&amp;state={state}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="207" x="178" y="240.0977">&amp;fromDateTime={fromDateTime}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173" x="178" y="255.4082">&amp;toDateTime={toDateTime}</text><polygon fill="#A80036" points="418,289.4609,428,293.4609,418,297.4609,422,293.4609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="167" x2="424" y1="293.4609" y2="293.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="174" y="288.7188">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="231" x="187" y="288.7188">GET - /settlementWindows/{params}</text><polygon fill="#A80036" points="642,334.082,652,338.082,642,342.082,646,338.082" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="440" x2="648" y1="338.082" y2="338.082"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="447" y="325.6846">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="460" y="318.0293">Request settlementWindow</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="460" y="333.3398">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="537" y="333.3398">2001</text><polygon fill="#A80036" points="866,363.3926,876,367.3926,866,371.3926,870,367.3926" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="664" x2="872" y1="367.3926" y2="367.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="671" y="362.6504">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="684" y="362.6504">Request settlementWindows</text><polygon fill="#FFFFE0" filter="url(#f1trggogjgpknh)" points="661,380.3926,1104,380.3926,1114,506.3926,1104,632.3926,661,632.3926,651,506.3926,661,380.3926" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="419" x="663" y="396.9609">SELECT DISTINCT sw.settlementId, swsc.settlementWindowStateId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="385" x="691" y="412.2715">swsc.reason, sw.createdDate, swsc.createdDate changedDate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="663" y="427.582">FROM</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="125" x="703" y="427.582">settlementWindow</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="832" y="427.582">sw</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="663" y="442.8926">JOIN</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="210" x="695" y="442.8926">settlementWindowStateChange</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="909" y="442.8926">swsc</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="439" x="663" y="458.2031">ON swsc.settlementWindowStateChangeId = sw.currentStateChangeId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="663" y="473.5137">JOIN</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="122" x="695" y="473.5137">transferFulfilment</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="10" x="821" y="473.5137">tf</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="333" x="663" y="488.8242">ON tf.settlementWindowId = sw.settlementWindowId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="663" y="504.1348">JOIN</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="127" x="695" y="504.1348">transferParticipant</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="13" x="826" y="504.1348">tp</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="663" y="519.4453">ON tp.transferId = tf.transferId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="663" y="534.7559">JOIN</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="136" x="695" y="534.7559">participantCurrency</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="15" x="835" y="534.7559">pc</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="350" x="663" y="550.0664">ON pc.participantCurrencyId = tp.participantCurrencyId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="260" x="663" y="565.377">[WHERE pc.participantId = {participantId}]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="292" x="663" y="580.6875">[AND swsc.settlementWindowStateId = {state}]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="263" x="663" y="595.998">[AND sw.createdDate &gt;= {fromDateTime}]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="246" x="663" y="611.3086">[AND sw.createdDate &lt;= {toDateTime}]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="667" y="626.6191"/><polygon fill="#A80036" points="675,655.6719,665,659.6719,675,663.6719,671,659.6719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="669" x2="882" y1="659.6719" y2="659.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="681" y="654.9297">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="694" y="654.9297">Return data</text><polygon fill="#A80036" points="451,684.9824,441,688.9824,451,692.9824,447,688.9824" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="445" x2="658" y1="688.9824" y2="688.9824"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="457" y="684.2402">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="470" y="684.2402">Return</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="132" x="515" y="684.2402">settlementWindows</text><path d="M23,703.9824 L85,703.9824 L85,710.9824 L75,720.9824 L23,720.9824 L23,703.9824 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="434.2109" style="stroke: #000000; stroke-width: 2.0;" width="563" x="23" y="703.9824"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="38" y="717.5508">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="162" x="100" y="716.6172">[One or more records found]</text><path d="M33,726.293 L33,751.293 L421,751.293 L421,736.293 L411,726.293 L33,726.293 " fill="#D3D3D3" filter="url(#f1trggogjgpknh)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M411,726.293 L411,736.293 L421,736.293 L411,726.293 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="367" x="39" y="743.8613">Are we going to report window content related info below?</text><path d="M36,765.6035 L36,912.6035 L421,912.6035 L421,775.6035 L411,765.6035 L36,765.6035 " fill="#FFFF00" filter="url(#f1trggogjgpknh)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M411,765.6035 L411,775.6035 L421,775.6035 L411,765.6035 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="42" y="783.1719">[</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="58" y="798.4824">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="74" y="813.793">"id": settlementWindow.settlementId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="332" x="74" y="829.1035">"state": settlementWindow.settlementWindowStateId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="74" y="844.4141">"reason": settlementWindow.reason,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="292" x="74" y="859.7246">"createdDate": settlementWindow.createdDate,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="302" x="74" y="875.0352">"changedDate": settlementWindow.changedDate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="58" y="890.3457">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="42" y="905.6563">]</text><polygon fill="#A80036" points="178,939.709,168,943.709,178,947.709,174,943.709" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="172" x2="429" y1="943.709" y2="943.709"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="184" y="938.9668">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="197" y="938.9668">Respond HTTP - 200 (OK)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="23" x2="586" y1="952.709" y2="952.709"/><path d="M445,958.709 L445,983.709 L572,983.709 L572,968.709 L562,958.709 L445,958.709 " fill="#D3D3D3" filter="url(#f1trggogjgpknh)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M562,958.709 L562,968.709 L572,968.709 L562,958.709 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="451" y="976.2773">Log ERROR event</text><path d="M91,998.0195 L91,1099.0195 L421,1099.0195 L421,1008.0195 L411,998.0195 L91,998.0195 " fill="#FFFF00" filter="url(#f1trggogjgpknh)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M411,998.0195 L411,1008.0195 L421,1008.0195 L411,998.0195 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="97" y="1015.5879">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="113" y="1030.8984">"errorInformation": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="129" y="1046.209">"errorCode": &lt;integer&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="277" x="129" y="1061.5195">"errorDescription": "Client error description"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="113" y="1076.8301">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="97" y="1092.1406">}</text><polygon fill="#A80036" points="173,1126.1934,163,1130.1934,173,1134.1934,169,1130.1934" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="167" x2="434" y1="1130.1934" y2="1130.1934"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="179" y="1125.4512">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="192" y="1125.4512">Respond HTTP - 4xx (Client error)</text><!--
@startuml
title 6.1.3. Get Settlement Windows By Parameters (getSettlementWindowsByParams)

autonumber


actor "Hub Employee" as OPERATOR
boundary "Settlement Service API" as SSAPI
entity "Settlement DAO" as SETTLE_DAO
database "Central Store" as DB

box "Central HUB" #lightpink
    participant OPERATOR
end box

box "Settlement Service" #lightgreen
    participant SSAPI
    participant SETTLE_DAO
end box

box "Central Services" #lightyellow
    participant DB
end box


group Get Settlement Windows By Parameters
    activate OPERATOR
    note right of OPERATOR #yellow
        **Params:**
        ?participantId={participantId}
        &state={state}
        &fromDateTime={fromDateTime}
        &toDateTime={toDateTime}
    end note
    OPERATOR -> SSAPI: GET - /settlementWindows/{params}
    activate SSAPI
    SSAPI -> SETTLE_DAO: Request settlementWindow\n<color #FF0000><b>Error code:</b> 2001</color>
    activate SETTLE_DAO
    SETTLE_DAO -> DB: Request settlementWindows
    activate DB
    hnote over DB #lightyellow
        SELECT DISTINCT sw.settlementId, swsc.settlementWindowStateId,
               swsc.reason, sw.createdDate, swsc.createdDate changedDate
        FROM **settlementWindow** sw
        JOIN **settlementWindowStateChange** swsc
        ON swsc.settlementWindowStateChangeId = sw.currentStateChangeId
        JOIN **transferFulfilment** tf
        ON tf.settlementWindowId = sw.settlementWindowId
        JOIN **transferParticipant** tp
        ON tp.transferId = tf.transferId
        JOIN **participantCurrency** pc
        ON pc.participantCurrencyId = tp.participantCurrencyId
        [WHERE pc.participantId = {participantId}]
        [AND swsc.settlementWindowStateId = {state}]
        [AND sw.createdDate >= {fromDateTime}]
        [AND sw.createdDate <= {toDateTime}]

    end hnote
    SETTLE_DAO <- - DB: Return data
    deactivate DB
    SSAPI <- - SETTLE_DAO: Return **settlementWindows**
    deactivate SETTLE_DAO
    alt One or more records found
        note left of SSAPI #lightgray
            <color #red>Are we going to report window content related info below?</color>
        end note
        note left of SSAPI #yellow
            [
                {
                    "id": settlementWindow.settlementId,
                    "state": settlementWindow.settlementWindowStateId,
                    "reason": settlementWindow.reason,
                    "createdDate": settlementWindow.createdDate,
                    "changedDate": settlementWindow.changedDate
                }
            ]
        end note
        OPERATOR <- - SSAPI: Respond HTTP - 200 (OK)
    else 
        note right of SSAPI #lightgray
            Log ERROR event
        end note
        note left of SSAPI #yellow
            {
                "errorInformation": {
                    "errorCode": <integer>,
                    "errorDescription": "Client error description"
                }
            }
        end note
        OPERATOR <- - SSAPI: Respond HTTP - 4xx (Client error)
        deactivate SSAPI
    deactivate OPERATOR
    end
end
@enduml

PlantUML version 1.2018.05(Sat May 05 23:00:17 EEST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_131-b11
Operating System: Mac OS X
OS Version: 10.15.1
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>